<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ íŠœë¸Œ ì˜ìƒ ì •ë¦¬ ë„êµ¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
        .modal-overlay { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(4px); }
        .file-drop-zone { border: 2px dashed #475569; transition: all 0.3s ease; }
        .file-drop-zone:hover, .file-drop-zone.drag-over { border-color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
        .claude-btn { background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%); }
        .claude-btn:hover { background: linear-gradient(135deg, #f97316 0%, #ef4444 100%); }
        .service-card { transition: all 0.2s ease; }
        .service-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
        .step-indicator { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-size: 12px; font-weight: bold; }
        .format-btn, .layout-btn { transition: all 0.2s ease; }
        .format-btn:hover, .layout-btn:hover { transform: translateY(-1px); }
        .toggle-switch { position: relative; width: 44px; height: 24px; background: #475569; border-radius: 12px; cursor: pointer; transition: background 0.3s; }
        .toggle-switch.active { background: #10b981; }
        .toggle-switch::after { content: ''; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: transform 0.3s; }
        .toggle-switch.active::after { transform: translateX(20px); }
        .option-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; border-radius: 3px; outline: none; }
        .option-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%; cursor: pointer; }
        .option-slider::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; cursor: pointer; border: none; }
        .slider-density { background: linear-gradient(to right, #6366f1, #8b5cf6, #a855f7); }
        .slider-density::-webkit-slider-thumb { background: #a855f7; }
        .slider-density::-moz-range-thumb { background: #a855f7; }
        .slider-explain { background: linear-gradient(to right, #10b981, #14b8a6, #06b6d4); }
        .slider-explain::-webkit-slider-thumb { background: #14b8a6; }
        .slider-explain::-moz-range-thumb { background: #14b8a6; }
        .slider-quiz { background: linear-gradient(to right, #f59e0b, #f97316); }
        .slider-quiz::-webkit-slider-thumb { background: #f59e0b; }
        .slider-quiz::-moz-range-thumb { background: #f59e0b; }
        .checkbox-custom { width: 18px; height: 18px; accent-color: #10b981; cursor: pointer; }
    </style>
</head>
<body class="min-h-screen p-4 md:p-6">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">ğŸ“º ìœ íŠœë¸Œ ì˜ìƒ ì •ë¦¬ ë„êµ¬</h1>
            <p class="text-slate-400 text-sm">ë‚´ìš©ì— ë§ëŠ” ì „ë¬¸ ë¶„ì„ ë¬¸ì„œ ìë™ ìƒì„± â†’ Claude ìë™ ì‹¤í–‰</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
            <!-- ì…ë ¥ ì˜ì—­ -->
            <div class="space-y-4">
                <!-- ìœ íŠœë¸Œ URL ì…ë ¥ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ”— ìœ íŠœë¸Œ ë§í¬</label>
                    <input type="text" id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=..." class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    <p id="loadingMsg" class="text-blue-400 text-sm mt-2 hidden">â³ ì˜ìƒ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...</p>
                    <p id="errorMsg" class="text-red-400 text-sm mt-2 hidden"></p>
                    <p id="successMsg" class="text-green-400 text-sm mt-2 hidden"></p>
                </div>

                <!-- ì˜ìƒ ì œëª© -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ“Œ ì˜ìƒ ì œëª©</label>
                    <input type="text" id="videoTitle" placeholder="ì˜ìƒ ì œëª©ì´ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤ (ë˜ëŠ” ì§ì ‘ ì…ë ¥)" class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                </div>

                <!-- ë¶„ì„ ëª¨ë“œ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-3">ğŸ¯ ë¶„ì„ ëª¨ë“œ</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setAnalysisMode('auto')" id="modeAuto" class="mode-btn px-3 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-purple-400 ring-offset-2 ring-offset-slate-800">
                            <span class="block text-base mb-0.5">ğŸ¤–</span>ìë™ íŒë‹¨
                        </button>
                        <button onclick="setAnalysisMode('finance')" id="modeFinance" class="mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                            <span class="block text-base mb-0.5">ğŸ“ˆ</span>ë¯¸êµ­ì¦ì‹œ/ê²½ì œ
                        </button>
                        <button onclick="setAnalysisMode('general')" id="modeGeneral" class="mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                            <span class="block text-base mb-0.5">ğŸ“š</span>ì¼ë°˜ ë¶„ì„
                        </button>
                    </div>
                    <p id="modeDescription" class="text-slate-400 text-xs mt-2">ğŸ’¡ Claudeê°€ ë‚´ìš©ì„ íŒŒì•…í•˜ì—¬ ìë™ìœ¼ë¡œ ë¶„ì„ ë°©í–¥ì„ ê²°ì •í•©ë‹ˆë‹¤.</p>
                </div>

                <!-- ì¶œë ¥ ì˜µì…˜: íŒŒì¼ í˜•ì‹ + ë ˆì´ì•„ì›ƒ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ“ íŒŒì¼ í˜•ì‹</label>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button onclick="setFileFormat('auto')" id="formatAuto" class="format-btn px-2 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-amber-400 ring-offset-1 ring-offset-slate-800">
                                    <span class="block text-sm">ğŸ¤–</span><span class="text-[10px]">ìë™</span>
                                </button>
                                <button onclick="setFileFormat('docx')" id="formatDocx" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ“</span><span class="text-[10px]">.docx</span>
                                </button>
                                <button onclick="setFileFormat('md')" id="formatMd" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ“‹</span><span class="text-[10px]">.md</span>
                                </button>
                                <button onclick="setFileFormat('html')" id="formatHtml" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸŒ</span><span class="text-[10px]">.html</span>
                                </button>
                                <button onclick="setFileFormat('pdf')" id="formatPdf" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ“„</span><span class="text-[10px]">.pdf</span>
                                </button>
                                <button onclick="setFileFormat('txt')" id="formatTxt" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ“ƒ</span><span class="text-[10px]">.txt</span>
                                </button>
                                <button onclick="setFileFormat('jsx')" id="formatJsx" class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">âš›ï¸</span><span class="text-[10px]">.jsx</span>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ“ ë¬¸ì„œ ë ˆì´ì•„ì›ƒ</label>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button onclick="setDocLayout('auto')" id="layoutAuto" class="layout-btn px-2 py-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-teal-400 ring-offset-1 ring-offset-slate-800">
                                    <span class="block text-sm">ğŸ¤–</span><span class="text-[10px]">ìë™</span>
                                </button>
                                <button onclick="setDocLayout('pc')" id="layoutPc" class="layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ–¥ï¸</span><span class="text-[10px]">PC</span>
                                </button>
                                <button onclick="setDocLayout('mobile')" id="layoutMobile" class="layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all">
                                    <span class="block text-sm">ğŸ“±</span><span class="text-[10px]">Mobile</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <p id="outputDescription" class="text-slate-400 text-xs mt-3">ğŸ“ ìë™ íŒŒì¼ í˜•ì‹ | ğŸ“ ìë™ ë ˆì´ì•„ì›ƒ</p>
                </div>

                <!-- ì •ë¦¬ ë°€ë„ + ì„¤ëª… ìˆ˜ì¤€ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- ì •ë¦¬ ë°€ë„ -->
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ“Š ì •ë¦¬ ë°€ë„</label>
                            <div class="space-y-2">
                                <input type="range" id="densitySlider" min="1" max="7" value="4" class="option-slider slider-density" oninput="updateDensity(this.value)" />
                                <div class="flex justify-between text-[10px] text-slate-500">
                                    <span>ìš”ì•½</span>
                                    <span>ìƒì„¸</span>
                                    <span>ëŒ€ë³¸</span>
                                </div>
                                <p id="densityLabel" class="text-purple-400 text-xs text-center font-medium">ğŸ“Š ê¸°ë³¸ (ìƒì„¸ ì •ë¦¬)</p>
                            </div>
                        </div>
                        <!-- ì„¤ëª… ìˆ˜ì¤€ -->
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">ğŸ“– ì„¤ëª… ìˆ˜ì¤€</label>
                            <div class="space-y-2">
                                <input type="range" id="explainSlider" min="1" max="7" value="4" class="option-slider slider-explain" oninput="updateExplain(this.value)" />
                                <div class="flex justify-between text-[10px] text-slate-500">
                                    <span>ì‰½ê²Œ</span>
                                    <span>ë³´í†µ</span>
                                    <span>ì „ë¬¸</span>
                                </div>
                                <p id="explainLabel" class="text-teal-400 text-xs text-center font-medium">ğŸ“– ê¸°ë³¸ (ì¼ë°˜ì¸ ìˆ˜ì¤€)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì‹œí—˜ë¬¸ì œ ì¶œì œ ì˜µì…˜ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="flex items-center justify-between mb-3">
                        <label class="text-sm font-medium text-slate-300">ğŸ“ ì‹œí—˜ë¬¸ì œ ì¶œì œ</label>
                        <div id="quizToggle" class="toggle-switch" onclick="toggleQuiz()"></div>
                    </div>
                    
                    <div id="quizOptions" class="hidden space-y-3">
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400 text-xs whitespace-nowrap">ë¬¸ì œ ìˆ˜:</span>
                            <input type="range" id="quizSlider" min="1" max="30" value="10" class="option-slider slider-quiz flex-1" oninput="syncQuizCount(this.value, 'slider')" />
                            <input type="number" id="quizInput" min="1" value="10" class="w-16 px-2 py-1 bg-slate-900 border border-slate-600 rounded text-white text-center text-sm focus:outline-none focus:ring-2 focus:ring-amber-500" oninput="syncQuizCount(this.value, 'input')" />
                            <span class="text-slate-400 text-xs">ë¬¸ì œ</span>
                        </div>
                        
                        <div class="flex items-center gap-2 p-2 bg-slate-900/50 rounded-lg">
                            <input type="checkbox" id="quizSeparateDoc" class="checkbox-custom" checked />
                            <label for="quizSeparateDoc" class="text-slate-300 text-xs cursor-pointer">
                                ğŸ“„ ë¬¸ì œì§€+ì •ë‹µì§€ë¥¼ ë³„ë„ ë¬¸ì„œë¡œ ìƒì„±
                            </label>
                        </div>
                        
                        <p class="text-slate-500 text-xs">ğŸ’¡ ìŠ¬ë¼ì´ë”: 1~30 | ì§ì ‘ ì…ë ¥: ì œí•œ ì—†ìŒ</p>
                    </div>
                    
                    <p id="quizDescription" class="text-slate-400 text-xs mt-2">ë¶„ì„ ë¬¸ì„œ ì‘ì„± í›„ ë‚´ìš© ê¸°ë°˜ ì‹œí—˜ë¬¸ì œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•©ë‹ˆë‹¤.</p>
                </div>

                <!-- ìë§‰ ì…ë ¥ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-medium text-slate-300">ğŸ“ ìë§‰ ë‚´ìš©</label>
                        <div class="flex gap-2">
                            <button onclick="openTranscriptModal()" class="px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-1">
                                <span>ğŸ“¥</span> ìë§‰ ê°€ì ¸ì˜¤ê¸°
                            </button>
                            <button onclick="clearTranscript()" class="px-3 py-1.5 bg-slate-600 hover:bg-slate-700 text-white text-xs font-medium rounded-lg transition-colors">ì§€ìš°ê¸°</button>
                        </div>
                    </div>
                    
                    <div id="fileDropZone" class="file-drop-zone rounded-lg p-3 mb-3 text-center cursor-pointer" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" accept=".txt,.srt,.vtt,.sub,.ass,.ssa,.sbv,.json" class="hidden" onchange="handleFileUpload(event)" />
                        <div class="text-slate-400 text-sm">
                            <span class="text-xl">ğŸ“</span>
                            <span class="ml-2">ìë§‰ íŒŒì¼ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­</span>
                            <span class="text-xs text-slate-500 ml-1">(TXT, SRT, VTT, SUB, ASS, SBV, JSON)</span>
                        </div>
                    </div>
                    <p id="fileInfo" class="text-green-400 text-xs mb-2 hidden"></p>
                    
                    <textarea id="transcript" placeholder="ìœ íŠœë¸Œ ìë§‰ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ê±°ë‚˜, íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜, 'ìë§‰ ê°€ì ¸ì˜¤ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”..." rows="4" class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none custom-scrollbar"></textarea>
                    <p id="transcriptInfo" class="text-slate-500 text-xs mt-2"></p>
                </div>

                <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                <div class="space-y-3">
                    <button onclick="runWithClaude()" class="w-full px-6 py-4 claude-btn text-white font-bold rounded-xl transition-all text-lg flex items-center justify-center gap-2">
                        ğŸš€ Claudeì—ì„œ ë¶„ì„ ì‹¤í–‰
                    </button>
                    <div class="flex gap-2">
                        <button onclick="generateDocument()" class="flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors text-sm">ğŸ“„ ë¯¸ë¦¬ë³´ê¸°</button>
                        <button onclick="copyToClipboard()" class="flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors text-sm">ğŸ“‹ ë³µì‚¬</button>
                        <button onclick="resetAll()" class="px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors text-sm">ğŸ”„ ë¦¬ì…‹</button>
                    </div>
                </div>
            </div>

            <!-- ì¶œë ¥ ì˜ì—­ -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 flex flex-col h-fit lg:h-auto">
                <div class="flex items-center justify-between px-4 md:px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-medium text-slate-300">ğŸ“‹ ìƒì„±ë  ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°</h2>
                    <div class="flex items-center gap-1 flex-wrap justify-end">
                        <span id="formatBadge" class="px-2 py-1 bg-amber-600/20 text-amber-400 text-xs rounded hidden">ìë™</span>
                        <span id="layoutBadge" class="px-2 py-1 bg-teal-600/20 text-teal-400 text-xs rounded hidden">ìë™</span>
                        <span id="densityBadge" class="px-2 py-1 bg-purple-600/20 text-purple-400 text-xs rounded hidden">ê¸°ë³¸</span>
                        <span id="explainBadge" class="px-2 py-1 bg-cyan-600/20 text-cyan-400 text-xs rounded hidden">ê¸°ë³¸</span>
                        <span id="quizBadge" class="px-2 py-1 bg-orange-600/20 text-orange-400 text-xs rounded hidden">ì‹œí—˜ 10ë¬¸ì œ</span>
                    </div>
                </div>
                <div class="flex-1 p-4 md:p-5 overflow-auto custom-scrollbar" style="max-height: 700px;">
                    <pre id="output" class="text-sm text-slate-300 whitespace-pre-wrap font-mono leading-relaxed"></pre>
                    <div id="placeholder" class="h-48 flex items-center justify-center text-slate-500 text-center">
                        <div>
                            <p class="text-4xl mb-3">ğŸ“</p>
                            <p>ìœ íŠœë¸Œ ë§í¬ì™€ ìë§‰ì„ ì…ë ¥í•˜ë©´</p>
                            <p>ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-6 text-center text-xs text-slate-500">
            <p>"Claudeì—ì„œ ë¶„ì„ ì‹¤í–‰" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìë™ìœ¼ë¡œ ë³µì‚¬ í›„ Claudeê°€ ì—´ë¦½ë‹ˆë‹¤.</p>
        </div>
    </div>

    <!-- ìë§‰ ê°€ì ¸ì˜¤ê¸° ëª¨ë‹¬ -->
    <div id="transcriptModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-3xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-700">
                <h3 class="text-lg font-semibold text-white">ğŸ“¥ ìë§‰ ê°€ì ¸ì˜¤ê¸°</h3>
                <button onclick="closeTranscriptModal()" class="text-slate-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="p-6 overflow-auto custom-scrollbar" style="max-height: calc(90vh - 140px);">
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-orange-600 text-white">1</span>
                        <h4 class="text-sm font-medium text-orange-400">íŒŒì¼ ì—…ë¡œë“œ (ê°€ì¥ ê°„í¸)</h4>
                        <span class="px-2 py-0.5 bg-orange-600/20 text-orange-400 text-xs rounded-full">ì¶”ì²œ</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <div id="modalFileDropZone" class="file-drop-zone rounded-lg p-6 text-center cursor-pointer" onclick="document.getElementById('modalFileInput').click()">
                            <input type="file" id="modalFileInput" accept=".txt,.srt,.vtt,.sub,.ass,.ssa,.sbv,.json" class="hidden" onchange="handleModalFileUpload(event)" />
                            <div class="text-slate-400">
                                <span class="text-3xl">ğŸ“</span>
                                <p class="mt-2 font-medium">ìë§‰ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­</p>
                                <p class="text-xs text-slate-500 mt-1">TXT, SRT, VTT, SUB, ASS, SBV, JSON ì§€ì›</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-blue-600 text-white">2</span>
                        <h4 class="text-sm font-medium text-blue-400">ì™¸ë¶€ ì„œë¹„ìŠ¤ì—ì„œ ë‹¤ìš´ë¡œë“œ</h4>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <p class="text-slate-300 text-sm mb-4">ì•„ë˜ ì„œë¹„ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ í´ë¦­ â†’ TXT ë‹¤ìš´ë¡œë“œ â†’ ìœ„ì— ì—…ë¡œë“œ</p>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('downsub')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold">DS</div><div><h5 class="text-white font-medium text-xs">DownSub</h5><p class="text-slate-400 text-xs">ê°€ì¥ ë§ì´ ì‚¬ìš©</p></div></div>
                            </div>
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('youtubetranscript')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-purple-600 rounded flex items-center justify-center text-white text-xs font-bold">YT</div><div><h5 class="text-white font-medium text-xs">YouTubeTranscript</h5><p class="text-slate-400 text-xs">ë¹ ë¥¸ ì¶”ì¶œ</p></div></div>
                            </div>
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('savesubs')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-green-600 rounded flex items-center justify-center text-white text-xs font-bold">SS</div><div><h5 class="text-white font-medium text-xs">SaveSubs</h5><p class="text-slate-400 text-xs">ë‹¤ì–‘í•œ í˜•ì‹</p></div></div>
                            </div>
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('ytsubs')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-red-600 rounded flex items-center justify-center text-white text-xs font-bold">DC</div><div><h5 class="text-white font-medium text-xs">DownloadCaptions</h5><p class="text-slate-400 text-xs">ì‹¬í”Œ</p></div></div>
                            </div>
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('subtitlebee')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-yellow-600 rounded flex items-center justify-center text-white text-xs font-bold">ğŸ</div><div><h5 class="text-white font-medium text-xs">SubtitleBee</h5><p class="text-slate-400 text-xs">ë¬´ë£Œ</p></div></div>
                            </div>
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('sstome')">
                                <div class="flex items-center gap-2"><div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center text-white text-xs font-bold">SD</div><div><h5 class="text-white font-medium text-xs">SSTo.me</h5><p class="text-slate-400 text-xs">ë¹ ë¥¸ ë‹¤ìš´</p></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-red-600 text-white">3</span>
                        <h4 class="text-sm font-medium text-red-400">ìœ íŠœë¸Œì—ì„œ ì§ì ‘ ë³µì‚¬</h4>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <div class="text-slate-300 text-sm space-y-2">
                            <p>â‘  ì˜ìƒ ì•„ë˜ <strong class="text-white">"...ë”ë³´ê¸°"</strong> â†’ <strong class="text-white">"ìŠ¤í¬ë¦½íŠ¸ í‘œì‹œ"</strong></p>
                            <p>â‘¡ ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ ì„ íƒ <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+A</kbd> â†’ ë³µì‚¬ <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+C</kbd></p>
                            <p>â‘¢ ìë§‰ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸° <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+V</kbd></p>
                        </div>
                        <button onclick="openYoutubeVideo()" class="mt-3 w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors">â–¶ï¸ ìœ íŠœë¸Œ ì˜ìƒ ì—´ê¸°</button>
                    </div>
                </div>
                <div class="p-3 bg-yellow-900/30 border border-yellow-700/50 rounded-lg">
                    <p class="text-yellow-300 text-xs flex items-start gap-2"><span>âš ï¸</span><span>ìë§‰ì´ ì—†ëŠ” ì˜ìƒì€ ìë§‰ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span></p>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-slate-700 bg-slate-800/50">
                <button onclick="closeTranscriptModal()" class="w-full px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì‹¤í–‰ ì•ˆë‚´ ëª¨ë‹¬ -->
    <div id="runModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-md w-full overflow-hidden">
            <div class="p-6 text-center">
                <div class="text-5xl mb-4">âœ…</div>
                <h3 class="text-xl font-bold text-white mb-2">í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                <p class="text-slate-400 mb-6">Claude ì°½ì—ì„œ ë¶™ì—¬ë„£ê¸°(Ctrl+V)ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>
                <div class="bg-slate-900 rounded-lg p-4 mb-6">
                    <p class="text-slate-300 text-sm"><span class="text-orange-400 font-bold">ë‹¤ìŒ ë‹¨ê³„:</span><br/>ì—´ë¦¬ëŠ” Claude ì°½ì—ì„œ<br/><kbd class="px-2 py-1 bg-slate-700 rounded text-white">Ctrl</kbd> + <kbd class="px-2 py-1 bg-slate-700 rounded text-white">V</kbd> ë¥¼ ëˆŒëŸ¬ ë¶™ì—¬ë„£ê¸°</p>
                </div>
                <div class="flex gap-3">
                    <button onclick="openClaudeNow()" class="flex-1 px-4 py-3 claude-btn text-white font-bold rounded-lg transition-colors">Claude ì—´ê¸° â†’</button>
                    <button onclick="closeRunModal()" class="px-4 py-3 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¦¬ì…‹ í™•ì¸ ëª¨ë‹¬ -->
    <div id="resetModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-sm w-full overflow-hidden">
            <div class="p-6 text-center">
                <div class="text-5xl mb-4">ğŸ”„</div>
                <h3 class="text-xl font-bold text-white mb-2">ì „ì²´ ë¦¬ì…‹</h3>
                <p class="text-slate-400 mb-6">ëª¨ë“  ì…ë ¥ ë‚´ìš©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <div class="flex gap-3">
                    <button onclick="confirmReset()" class="flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors">ì´ˆê¸°í™”</button>
                    <button onclick="closeResetModal()" class="flex-1 px-4 py-3 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ìƒíƒœ ë³€ìˆ˜
        let currentAnalysisMode = 'auto';
        let currentFileFormat = 'auto';
        let currentDocLayout = 'auto';
        let quizEnabled = false;
        let quizCount = 10;
        let densityLevel = 4; // 1-7, 4ê°€ ê¸°ë³¸
        let explainLevel = 4; // 1-7, 4ê°€ ê¸°ë³¸

        function getCurrentDate() {
            const now = new Date();
            return `${now.getFullYear()}ë…„ ${now.getMonth() + 1}ì›” ${now.getDate()}ì¼`;
        }

        // ì •ë¦¬ ë°€ë„ ì—…ë°ì´íŠ¸
        function updateDensity(value) {
            densityLevel = parseInt(value);
            const labels = {
                1: 'ğŸ“Š ê°„ëµ ìš”ì•½ (í•µì‹¬ë§Œ)',
                2: 'ğŸ“Š ìš”ì•½ (ì£¼ìš” í¬ì¸íŠ¸)',
                3: 'ğŸ“Š ì••ì¶• ì •ë¦¬',
                4: 'ğŸ“Š ê¸°ë³¸ (ìƒì„¸ ì •ë¦¬)',
                5: 'ğŸ“Š ìƒì„¸ (í’ë¶€í•œ ì„¤ëª…)',
                6: 'ğŸ“Š ë§¤ìš° ìƒì„¸ (ê±°ì˜ ì „ë¬¸)',
                7: 'ğŸ“Š ëŒ€ë³¸ ìˆ˜ì¤€ (ì „ì²´ ë‚´ìš©)'
            };
            document.getElementById('densityLabel').textContent = labels[densityLevel];
            document.getElementById('densityBadge').textContent = labels[densityLevel].split('(')[0].trim();
        }

        // ì„¤ëª… ìˆ˜ì¤€ ì—…ë°ì´íŠ¸
        function updateExplain(value) {
            explainLevel = parseInt(value);
            const labels = {
                1: 'ğŸ“– ë§¤ìš° ì‰½ê²Œ (ì´ˆë“±í•™ìƒ)',
                2: 'ğŸ“– ì‰½ê²Œ (ì¤‘í•™ìƒ)',
                3: 'ğŸ“– ì¹œì ˆí•˜ê²Œ (ê³ ë“±í•™ìƒ)',
                4: 'ğŸ“– ê¸°ë³¸ (ì¼ë°˜ì¸ ìˆ˜ì¤€)',
                5: 'ğŸ“– ê°„ê²°í•˜ê²Œ (ê¸°ë³¸ ì§€ì‹ ê°€ì •)',
                6: 'ğŸ“– ì „ë¬¸ì  (ìš©ì–´ ì„¤ëª… ìµœì†Œ)',
                7: 'ğŸ“– ì „ë¬¸ê°€ìš© (ì„¤ëª… ìƒëµ)'
            };
            document.getElementById('explainLabel').textContent = labels[explainLevel];
            document.getElementById('explainBadge').textContent = labels[explainLevel].split('(')[0].trim();
        }

        // ì‹œí—˜ë¬¸ì œ í† ê¸€
        function toggleQuiz() {
            quizEnabled = !quizEnabled;
            const toggle = document.getElementById('quizToggle');
            const options = document.getElementById('quizOptions');
            if (quizEnabled) {
                toggle.classList.add('active');
                options.classList.remove('hidden');
            } else {
                toggle.classList.remove('active');
                options.classList.add('hidden');
            }
            updateQuizBadge();
        }

        function syncQuizCount(value, source) {
            const num = parseInt(value) || 1;
            quizCount = Math.max(1, num);
            if (source === 'slider') {
                document.getElementById('quizInput').value = quizCount;
            } else {
                document.getElementById('quizSlider').value = Math.min(30, Math.max(1, quizCount));
            }
            updateQuizBadge();
        }

        function updateQuizBadge() {
            const badge = document.getElementById('quizBadge');
            if (quizEnabled) {
                badge.textContent = `ì‹œí—˜ ${quizCount}ë¬¸ì œ`;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function setAnalysisMode(mode) {
            currentAnalysisMode = mode;
            const buttons = { 'auto': 'modeAuto', 'finance': 'modeFinance', 'general': 'modeGeneral' };
            const colors = { 'auto': 'from-purple-600 to-blue-600 ring-purple-400', 'finance': 'from-green-600 to-emerald-600 ring-green-400', 'general': 'from-blue-600 to-cyan-600 ring-blue-400' };
            Object.keys(buttons).forEach(key => {
                const btn = document.getElementById(buttons[key]);
                btn.className = key === mode 
                    ? `mode-btn px-3 py-2.5 bg-gradient-to-r ${colors[key]} text-white text-xs font-medium rounded-lg transition-all ring-2 ring-offset-2 ring-offset-slate-800`
                    : 'mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
            });
            const descriptions = { 'auto': 'ğŸ’¡ Claudeê°€ ë‚´ìš©ì„ íŒŒì•…í•˜ì—¬ ìë™ìœ¼ë¡œ ë¶„ì„ ë°©í–¥ì„ ê²°ì •í•©ë‹ˆë‹¤.', 'finance': 'ğŸ“ˆ ë¯¸êµ­ ì¦ì‹œ, ê²½ì œ, íˆ¬ì ê´€ì ì—ì„œ ë¶„ì„í•©ë‹ˆë‹¤.', 'general': 'ğŸ“š í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì ì—ì„œ ë¶„ì„í•©ë‹ˆë‹¤.' };
            document.getElementById('modeDescription').textContent = descriptions[mode];
        }

        function setFileFormat(format) {
            currentFileFormat = format;
            const formats = ['auto', 'docx', 'md', 'html', 'pdf', 'txt', 'jsx'];
            const colors = { 'auto': { bg: 'from-amber-600 to-orange-600', ring: 'ring-amber-400' }, 'docx': { bg: 'from-blue-600 to-blue-700', ring: 'ring-blue-400' }, 'md': { bg: 'from-slate-600 to-slate-700', ring: 'ring-slate-400' }, 'html': { bg: 'from-orange-600 to-red-600', ring: 'ring-orange-400' }, 'pdf': { bg: 'from-red-600 to-red-700', ring: 'ring-red-400' }, 'txt': { bg: 'from-gray-600 to-gray-700', ring: 'ring-gray-400' }, 'jsx': { bg: 'from-cyan-600 to-blue-600', ring: 'ring-cyan-400' } };
            formats.forEach(f => {
                const btn = document.getElementById('format' + f.charAt(0).toUpperCase() + f.slice(1));
                if (btn) {
                    btn.className = f === format 
                        ? `format-btn px-2 py-2 bg-gradient-to-r ${colors[f].bg} text-white text-xs font-medium rounded-lg transition-all ring-2 ${colors[f].ring} ring-offset-1 ring-offset-slate-800`
                        : 'format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
                }
            });
            updateOutputDescription();
            updateBadges();
        }

        function setDocLayout(layout) {
            currentDocLayout = layout;
            const layouts = ['auto', 'pc', 'mobile'];
            const colors = { 'auto': { bg: 'from-teal-600 to-cyan-600', ring: 'ring-teal-400' }, 'pc': { bg: 'from-indigo-600 to-purple-600', ring: 'ring-indigo-400' }, 'mobile': { bg: 'from-pink-600 to-rose-600', ring: 'ring-pink-400' } };
            layouts.forEach(l => {
                const btn = document.getElementById('layout' + l.charAt(0).toUpperCase() + l.slice(1));
                if (btn) {
                    btn.className = l === layout 
                        ? `layout-btn px-2 py-2 bg-gradient-to-r ${colors[l].bg} text-white text-xs font-medium rounded-lg transition-all ring-2 ${colors[l].ring} ring-offset-1 ring-offset-slate-800`
                        : 'layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
                }
            });
            updateOutputDescription();
            updateBadges();
        }

        function updateOutputDescription() {
            const formatTexts = { 'auto': 'ìë™', 'docx': '.docx', 'md': '.md', 'html': '.html', 'pdf': '.pdf', 'txt': '.txt', 'jsx': '.jsx' };
            const layoutTexts = { 'auto': 'ìë™', 'pc': 'PC', 'mobile': 'Mobile' };
            document.getElementById('outputDescription').textContent = `ğŸ“ ${formatTexts[currentFileFormat]} íŒŒì¼ í˜•ì‹ | ğŸ“ ${layoutTexts[currentDocLayout]} ë ˆì´ì•„ì›ƒ`;
        }

        function updateBadges() {
            document.getElementById('formatBadge').textContent = { 'auto': 'ìë™', 'docx': '.docx', 'md': '.md', 'html': '.html', 'pdf': '.pdf', 'txt': '.txt', 'jsx': '.jsx' }[currentFileFormat];
            document.getElementById('layoutBadge').textContent = { 'auto': 'ìë™', 'pc': 'PC', 'mobile': 'Mobile' }[currentDocLayout];
        }

        function extractVideoId(url) {
            const patterns = [/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/, /youtube\.com\/shorts\/([^&\n?#]+)/];
            for (const pattern of patterns) { const match = url.match(pattern); if (match) return match[1]; }
            return null;
        }

        async function fetchVideoTitle(url) {
            const loadingMsg = document.getElementById('loadingMsg');
            const errorMsg = document.getElementById('errorMsg');
            const successMsg = document.getElementById('successMsg');
            loadingMsg.classList.remove('hidden'); errorMsg.classList.add('hidden'); successMsg.classList.add('hidden');
            try {
                const response = await fetch(`https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`);
                if (!response.ok) throw new Error();
                const data = await response.json();
                document.getElementById('videoTitle').value = data.title;
                successMsg.textContent = 'âœ… ì˜ìƒ ì •ë³´ ì™„ë£Œ! ìë§‰ì„ ì¶”ê°€í•˜ì„¸ìš”.'; successMsg.classList.remove('hidden');
            } catch (err) { errorMsg.textContent = 'âš ï¸ ì œëª©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.'; errorMsg.classList.remove('hidden'); }
            finally { loadingMsg.classList.add('hidden'); }
        }

        document.getElementById('youtubeUrl').addEventListener('input', function(e) { if (extractVideoId(e.target.value)) fetchVideoTitle(e.target.value); });

        function handleFileUpload(event) { if (event.target.files[0]) processFile(event.target.files[0]); }
        function handleModalFileUpload(event) { if (event.target.files[0]) { processFile(event.target.files[0]); closeTranscriptModal(); } }

        function processFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                let content = e.target.result;
                const fileName = file.name.toLowerCase();
                if (fileName.endsWith('.srt') || fileName.endsWith('.vtt') || fileName.endsWith('.sbv')) content = cleanSubtitleFormat(content);
                else if (fileName.endsWith('.ass') || fileName.endsWith('.ssa')) content = cleanASSFormat(content);
                else if (fileName.endsWith('.json')) content = cleanJSONFormat(content);
                document.getElementById('transcript').value = content;
                document.getElementById('fileInfo').textContent = `âœ… "${file.name}" ë¡œë“œë¨`;
                document.getElementById('fileInfo').classList.remove('hidden');
                updateTranscriptInfo();
            };
            reader.readAsText(file);
        }

        function cleanSubtitleFormat(content) { return content.replace(/^\d+\s*$/gm, '').replace(/\d{1,2}:\d{2}:\d{2}[,\.]\d{3}\s*-->\s*\d{1,2}:\d{2}:\d{2}[,\.]\d{3}/g, '').replace(/\d{1,2}:\d{2}[,\.]\d{3}\s*,\s*\d{1,2}:\d{2}[,\.]\d{3}/g, '').replace(/WEBVTT.*$/gm, '').replace(/<[^>]+>/g, '').replace(/\{[^}]+\}/g, '').replace(/\n{3,}/g, '\n\n').trim(); }
        function cleanASSFormat(content) { return content.split('\n').filter(line => line.startsWith('Dialogue:')).map(line => { const parts = line.split(','); if (parts.length >= 10) return parts.slice(9).join(',').replace(/\{[^}]+\}/g, '').replace(/\\N/g, ' ').trim(); return ''; }).filter(Boolean).join('\n'); }
        function cleanJSONFormat(content) { try { const data = JSON.parse(content); if (Array.isArray(data)) return data.map(item => item.text || item.content || '').join(' '); if (data.events) return data.events.filter(e => e.segs).map(e => e.segs.map(s => s.utf8).join('')).join(' '); if (data.transcript) return data.transcript; return content; } catch (e) { return content; } }

        function setupDragAndDrop(elementId) {
            const dropZone = document.getElementById(elementId);
            if (!dropZone) return;
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); }, false));
            ['dragenter', 'dragover'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.add('drag-over'), false));
            ['dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.remove('drag-over'), false));
            dropZone.addEventListener('drop', (e) => { if (e.dataTransfer.files.length > 0) { processFile(e.dataTransfer.files[0]); if (elementId === 'modalFileDropZone') closeTranscriptModal(); } }, false);
        }
        setupDragAndDrop('fileDropZone'); setupDragAndDrop('modalFileDropZone');

        function openTranscriptModal() { document.getElementById('transcriptModal').classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeTranscriptModal() { document.getElementById('transcriptModal').classList.add('hidden'); document.body.style.overflow = ''; }
        function closeRunModal() { document.getElementById('runModal').classList.add('hidden'); document.body.style.overflow = ''; }
        function openResetModal() { document.getElementById('resetModal').classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeResetModal() { document.getElementById('resetModal').classList.add('hidden'); document.body.style.overflow = ''; }

        function openExternalService(service) {
            const url = document.getElementById('youtubeUrl').value;
            const videoId = extractVideoId(url);
            const services = { 'downsub': videoId ? `https://downsub.com/?url=${encodeURIComponent(url)}` : 'https://downsub.com/', 'youtubetranscript': videoId ? `https://youtubetranscript.com/?v=${videoId}` : 'https://youtubetranscript.com/', 'savesubs': videoId ? `https://savesubs.com/process?url=${encodeURIComponent(url)}` : 'https://savesubs.com/', 'ytsubs': videoId ? `https://downloadyoutubesubtitle.com/?url=${encodeURIComponent(url)}` : 'https://downloadyoutubesubtitle.com/', 'subtitlebee': 'https://subtitlebee.com/youtube-subtitle-downloader', 'sstome': videoId ? `https://ssto.me/?url=${encodeURIComponent(url)}` : 'https://ssto.me/' };
            window.open(services[service], '_blank');
        }

        function openYoutubeVideo() { window.open(document.getElementById('youtubeUrl').value || 'https://www.youtube.com/', '_blank'); }
        function clearTranscript() { document.getElementById('transcript').value = ''; document.getElementById('transcriptInfo').textContent = ''; document.getElementById('fileInfo').classList.add('hidden'); }
        function updateTranscriptInfo() { const text = document.getElementById('transcript').value; document.getElementById('transcriptInfo').textContent = `ê¸€ì ìˆ˜: ${text.length.toLocaleString()} | ë‹¨ì–´ ìˆ˜: ${text.trim() ? text.trim().split(/\s+/).length.toLocaleString() : 0}`; }
        document.getElementById('transcript').addEventListener('input', updateTranscriptInfo);

        // ë°€ë„ í…ìŠ¤íŠ¸
        function getDensityText() {
            const texts = {
                1: 'í•µì‹¬ ë‚´ìš©ë§Œ 3-5ì¤„ë¡œ ê°„ëµí•˜ê²Œ ìš”ì•½',
                2: 'ì£¼ìš” í¬ì¸íŠ¸ ìœ„ì£¼ë¡œ ìš”ì•½ (ë¶„ëŸ‰ì˜ 20% ìˆ˜ì¤€)',
                3: 'ì¤‘ìš” ë‚´ìš© ì¤‘ì‹¬ìœ¼ë¡œ ì••ì¶• ì •ë¦¬ (ë¶„ëŸ‰ì˜ 40% ìˆ˜ì¤€)',
                4: 'ìƒì„¸í•˜ê²Œ ì •ë¦¬í•˜ë˜ ë¶ˆí•„ìš”í•œ ë°˜ë³µ ì œê±° (ë¶„ëŸ‰ì˜ 60% ìˆ˜ì¤€)',
                5: 'í’ë¶€í•œ ì„¤ëª…ê³¼ ì˜ˆì‹œ í¬í•¨ (ë¶„ëŸ‰ì˜ 80% ìˆ˜ì¤€)',
                6: 'ê±°ì˜ ëª¨ë“  ë‚´ìš©ì„ í¬í•¨í•œ ìƒì„¸ ì •ë¦¬ (ë¶„ëŸ‰ì˜ 90% ìˆ˜ì¤€)',
                7: 'ëŒ€ë³¸ ìˆ˜ì¤€ìœ¼ë¡œ ì „ì²´ ë‚´ìš© ê·¸ëŒ€ë¡œ ì •ë¦¬ (ë¶„ëŸ‰ì˜ 100%)'
            };
            return texts[densityLevel];
        }

        // ì„¤ëª… ìˆ˜ì¤€ í…ìŠ¤íŠ¸
        function getExplainText() {
            const texts = {
                1: 'ì´ˆë“±í•™ìƒë„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë§¤ìš° ì‰½ê²Œ ì„¤ëª…. ëª¨ë“  ì „ë¬¸ìš©ì–´ì— ìƒì„¸í•œ ì„¤ëª… ì¶”ê°€. ë¹„ìœ ì™€ ì˜ˆì‹œ í’ë¶€í•˜ê²Œ ì‚¬ìš©.',
                2: 'ì¤‘í•™ìƒ ìˆ˜ì¤€ìœ¼ë¡œ ì‰½ê²Œ ì„¤ëª…. ì „ë¬¸ìš©ì–´ëŠ” ê°„ë‹¨í•œ ê´„í˜¸ ì„¤ëª… ì¶”ê°€. ì–´ë ¤ìš´ ê°œë…ì€ í’€ì–´ì„œ ì„¤ëª….',
                3: 'ê³ ë“±í•™ìƒ ìˆ˜ì¤€ìœ¼ë¡œ ì¹œì ˆí•˜ê²Œ ì„¤ëª…. í•„ìš”í•œ ì „ë¬¸ìš©ì–´ì— ì„¤ëª… ì¶”ê°€. ë§¥ë½ ì´í•´ë¥¼ ë•ëŠ” ë°°ê²½ ì„¤ëª… í¬í•¨.',
                4: 'ì¼ë°˜ ì„±ì¸ì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€. ì¼ë°˜ì ì´ì§€ ì•Šì€ ì „ë¬¸ìš©ì–´ë§Œ ì„¤ëª…. ê¸°ë³¸ì ì¸ ë°°ê²½ ì§€ì‹ ê°€ì •.',
                5: 'ê¸°ë³¸ ì§€ì‹ì´ ìˆëŠ” ë…ì ëŒ€ìƒ. ì „ë¬¸ìš©ì–´ ì„¤ëª… ìµœì†Œí™”. í•µì‹¬ ë‚´ìš©ì— ì§‘ì¤‘.',
                6: 'í•´ë‹¹ ë¶„ì•¼ ê¸°ì´ˆ ì§€ì‹ ë³´ìœ ì ëŒ€ìƒ. ì „ë¬¸ìš©ì–´ ì„¤ëª… ê±°ì˜ ìƒëµ. ê°„ê²°í•œ ë¬¸ì²´ ì‚¬ìš©.',
                7: 'ì „ë¬¸ê°€ ìˆ˜ì¤€. ëª¨ë“  ì „ë¬¸ìš©ì–´ ì„¤ëª… ìƒëµ. ì—…ê³„ ìš©ì–´ ê·¸ëŒ€ë¡œ ì‚¬ìš©. ìµœëŒ€í•œ ê°„ê²°í•˜ê²Œ.'
            };
            return texts[explainLevel];
        }

        // íŒŒì¼ í˜•ì‹ í…ìŠ¤íŠ¸
        function getFileFormatText() {
            const formats = { 'auto': 'ë‚´ìš©ì— ê°€ì¥ ì í•©í•œ í˜•ì‹ì„ ìë™ ì„ íƒ', 'docx': 'Word ë¬¸ì„œ (.docx) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±', 'md': 'Markdown (.md) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±', 'html': 'HTML (.html) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±', 'pdf': 'PDF (.pdf) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±', 'txt': 'í…ìŠ¤íŠ¸ (.txt) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±', 'jsx': 'React ì»´í¬ë„ŒíŠ¸ (.jsx) í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ íŒŒì¼ ìƒì„±' };
            return formats[currentFileFormat];
        }

        function getLayoutText() {
            const layouts = { 'auto': 'ë‚´ìš©ì— ë”°ë¼ ìµœì  ë ˆì´ì•„ì›ƒ ìë™ ì„ íƒ', 'pc': 'PC í™”ë©´ ìµœì í™” (ë„“ì€ ë ˆì´ì•„ì›ƒ, ë‹¤ë‹¨ êµ¬ì„±, ê°€ë¡œí˜• í…Œì´ë¸”)', 'mobile': 'ëª¨ë°”ì¼ í™”ë©´ ìµœì í™” (ë‹¨ì¼ ì»¬ëŸ¼, ì„¸ë¡œ ìŠ¤í¬ë¡¤, ê°„ê²°í•œ êµ¬ì„±)' };
            return layouts[currentDocLayout];
        }

        // ì‹œí—˜ë¬¸ì œ í”„ë¡¬í”„íŠ¸
        function getQuizPrompt() {
            if (!quizEnabled) return '';
            const separateDoc = document.getElementById('quizSeparateDoc').checked;
            
            let quizInstructions = `

---

## ğŸ“ ì‹œí—˜ë¬¸ì œ ì¶œì œ (${quizCount}ë¬¸ì œ)

ìœ„ ë¶„ì„ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ **${quizCount}ê°œì˜ ì‹œí—˜ë¬¸ì œ**ë¥¼ ì¶œì œí•´ì£¼ì„¸ìš”.

### âš ï¸ ì¤‘ìš”: ë¬¸ì œì™€ ì •ë‹µ ë¶„ë¦¬ ì‘ì„±

**[ë¬¸ì œì§€]** ë¥¼ ë¨¼ì € ëª¨ë‘ ì‘ì„±í•œ í›„, **[ì •ë‹µì§€]** ë¥¼ ë³„ë„ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

### ğŸ“‹ ë¬¸ì œì§€ í˜•ì‹:
\`\`\`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ì‹œí—˜ë¬¸ì œ (ì´ ${quizCount}ë¬¸ì œ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ë¬¸ì œ 1] â­ (ì‰¬ì›€) - ê°ê´€ì‹
ì§ˆë¬¸ ë‚´ìš©...
â‘  ë³´ê¸°1  â‘¡ ë³´ê¸°2  â‘¢ ë³´ê¸°3  â‘£ ë³´ê¸°4

[ë¬¸ì œ 2] â­â­ (ë³´í†µ) - ë‹¨ë‹µí˜•
ì§ˆë¬¸ ë‚´ìš©...

... (ëª¨ë“  ë¬¸ì œ)
\`\`\`

### ğŸ“ ì •ë‹µì§€ í˜•ì‹:
\`\`\`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ ì •ë‹µ ë° í•´ì„¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ë¬¸ì œ 1] ì •ë‹µ: â‘¢
í•´ì„¤: ...

[ë¬¸ì œ 2] ì •ë‹µ: ...
í•´ì„¤: ...

... (ëª¨ë“  ì •ë‹µ ë° í•´ì„¤)
\`\`\`

### ë¬¸ì œ ì¶œì œ ìš”êµ¬ì‚¬í•­:
1. **ë¬¸ì œ ìœ í˜• ë‹¤ì–‘í•˜ê²Œ:** ê°ê´€ì‹(4-5ì§€ì„ ë‹¤), ë‹¨ë‹µí˜•, OXë¬¸ì œ, ë¹ˆì¹¸ì±„ìš°ê¸°, ì„œìˆ í˜•
2. **ë‚œì´ë„ ë°°ë¶„:** ì‰¬ì›€(â­) 30%, ë³´í†µ(â­â­) 50%, ì–´ë ¤ì›€(â­â­â­) 20%
3. **ë‚´ìš©:** ì˜ìƒì˜ í•µì‹¬ ë‚´ìš©, ì¤‘ìš” ìˆ˜ì¹˜/í†µê³„, ê°œë… ì´í•´, ì‹¤ì œ ì ìš©`;

            if (separateDoc) {
                quizInstructions += `

### ğŸ“„ ë³„ë„ ë¬¸ì„œ ìƒì„± ìš”ì²­
**ì‹œí—˜ë¬¸ì œ(ë¬¸ì œì§€ + ì •ë‹µì§€)ëŠ” ë¶„ì„ ë¬¸ì„œì™€ ë³„ë„ì˜ íŒŒì¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.**
- ë¶„ì„ ë¬¸ì„œ: [ì œëª©]_ë¶„ì„.${currentFileFormat === 'auto' ? 'docx' : currentFileFormat}
- ì‹œí—˜ë¬¸ì œ: [ì œëª©]_ì‹œí—˜ë¬¸ì œ.${currentFileFormat === 'auto' ? 'docx' : currentFileFormat}`;
            }

            return quizInstructions;
        }

        function getPromptByMode(mode, videoTitle, youtubeUrl, transcript) {
            const header = `**Title:** ${videoTitle || '[ì˜ìƒ ì œëª©]'}
**Link:** ${youtubeUrl || '[ìœ íŠœë¸Œ ë§í¬]'}
**Date:** ${getCurrentDate()}

---

`;
            // íŒŒì¼ í˜•ì‹ ê°•ì œ ì§€ì‹œ
            let formatInstruction = currentFileFormat !== 'auto' 
                ? `\nâš ï¸ **[í•„ìˆ˜] ì¶œë ¥ íŒŒì¼ í˜•ì‹: ${getFileFormatText()}**\n- ë°˜ë“œì‹œ .${currentFileFormat} í™•ì¥ì íŒŒì¼ë§Œ ìƒì„±í•˜ì„¸ìš”.\n- íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šê³  í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”.\n`
                : `\nğŸ“ **ì¶œë ¥ íŒŒì¼ í˜•ì‹:** ${getFileFormatText()}\n`;

            let layoutInstruction = currentDocLayout !== 'auto'
                ? `\nğŸ“ **[í•„ìˆ˜] ë¬¸ì„œ ë ˆì´ì•„ì›ƒ:** ${getLayoutText()}\n`
                : `\nğŸ“ **ë¬¸ì„œ ë ˆì´ì•„ì›ƒ:** ${getLayoutText()}\n`;

            const densityInstruction = `\nğŸ“Š **ì •ë¦¬ ë°€ë„:** ${getDensityText()}\n`;
            const explainInstruction = `\nğŸ“– **ì„¤ëª… ìˆ˜ì¤€:** ${getExplainText()}\n`;

            const outputOptions = formatInstruction + layoutInstruction + densityInstruction + explainInstruction;

            const commonRequirements = `
ğŸ“Œ **ê³µí†µ ìš”ì²­ì‚¬í•­:**
1. í•œë²ˆì— ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥í•˜ê²Œ ë³„ë„ì˜ ì°½ìœ¼ë¡œ ì‘ì„±
2. ìˆ˜ì¹˜ë‚˜ í†µê³„ëŠ” ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€
3. ë„í‘œ, ê·¸ë˜í”„ë¡œ ì‘ì„± ê°€ëŠ¥í•œ ê²ƒì€ ì´ë¯¸ì§€ë¡œ ì‘ì„±í•˜ì—¬ ë³¸ë¬¸ ì‚¬ì´ì— ì‚½ì…
4. í‘œ, ê·¸ë˜í”„ëŠ” ê¹¨ì§€ì§€ ì•Šê²Œ ê¹”ë”í•˜ê²Œ ì‘ì„±
5. í…ìŠ¤íŠ¸ì— ì—†ëŠ” ë‚´ìš©ì€ ê³¼ë„í•˜ê²Œ ì¶”ê°€í•˜ì§€ ì•Šê¸°
6. ì¤‘ìš”í•œ ë¶€ë¶„ì€ ê°•ì¡°í•´ì„œ í‘œì‹œ
7. ì¤‘ê°„ì— ì¤‘ë‹¨í•˜ì§€ ë§ê³  ëê¹Œì§€ í•œë²ˆì— ì‘ì„±
8. HTML íŒŒì¼ ìƒì„± ì‹œ ë°˜ë“œì‹œ <head> ì•ˆì— <meta name="robots" content="noindex, nofollow"> íƒœê·¸ í¬í•¨
${getQuizPrompt()}

---

## ğŸ“ ì›ë³¸ ìë§‰ ë‚´ìš©

${transcript}

---

`;
            if (mode === 'auto') {
                return header + `ì•„ë˜ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
âš ï¸ **ì¤‘ìš”: ë¶„ì„ ë°©í–¥ ìë™ íŒë‹¨**

ë¨¼ì € ì•„ë˜ ìë§‰ ë‚´ìš©ì„ ì½ê³ , ì£¼ì œë¥¼ íŒŒì•…í•´ì£¼ì„¸ìš”:

1. **ë¯¸êµ­ ì¦ì‹œ/ê²½ì œ ê´€ë ¨ ë‚´ìš©ì¸ ê²½ìš°:**
   - ë¯¸êµ­ ì¦ì‹œ, ì£¼ì‹, íˆ¬ì, ê²½ì œ ì§€í‘œ, ì—°ì¤€(Fed), ê¸ˆë¦¬, ì¸í”Œë ˆì´ì…˜, GDP, ê³ ìš©ì§€í‘œ, ê¸°ì—… ì‹¤ì  ë“±ì˜ ë‚´ìš©ì´ë¼ë©´
   - â†’ ë¯¸êµ­ì¦ì‹œ/ê²½ì œì  ê´€ì ì—ì„œ ë¶„ì„

2. **ê·¸ ì™¸ ë‹¤ë¥¸ ì£¼ì œì¸ ê²½ìš°:**
   - â†’ í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì ì—ì„œ ë¶„ì„
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”.`;

            } else if (mode === 'finance') {
                return header + `ì•„ë˜ ë‚´ìš©ì„ **ë¯¸êµ­ ì¦ì‹œ ë° ê²½ì œì  ê´€ì **ì—ì„œ ìƒì„¸í•˜ê²Œ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
ğŸ“ˆ **ë¶„ì„ ë°©í–¥:** ë¯¸êµ­ ì¦ì‹œ ì˜í–¥, íˆ¬ì ì‹œì‚¬ì , ì„¹í„°/ì¢…ëª© ë¶„ì„, ê±°ì‹œê²½ì œ ì—°ê´€ì„±, ì—°ì¤€ ì •ì±…, ì‹œì¥ ì „ë§
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ ë¯¸êµ­ì¦ì‹œ/ê²½ì œ ê´€ì ì—ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”.`;

            } else {
                return header + `ì•„ë˜ ë‚´ìš©ì„ **í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì **ì—ì„œ ìƒì„¸í•˜ê²Œ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
ğŸ“š **ë¶„ì„ ë°©í–¥:** í•µì‹¬ ì£¼ì œ íŒŒì•…, ì¤‘ìš” í¬ì¸íŠ¸, ì „ë¬¸ ìš©ì–´ ì„¤ëª…, ë°°ê²½ ì§€ì‹, ì‹¤ìš©ì  ì‹œì‚¬ì 
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ í•´ë‹¹ ë¶„ì•¼ì— ë§ê²Œ ì „ë¬¸ì ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”.`;
            }
        }

        function generateDocument() {
            const content = buildDocumentContent();
            if (!content) return;
            document.getElementById('output').textContent = content;
            document.getElementById('placeholder').classList.add('hidden');
            ['formatBadge', 'layoutBadge', 'densityBadge', 'explainBadge'].forEach(id => document.getElementById(id).classList.remove('hidden'));
            updateQuizBadge();
        }

        function buildDocumentContent() {
            const transcript = document.getElementById('transcript').value;
            if (!transcript.trim()) {
                document.getElementById('errorMsg').textContent = 'âš ï¸ ìë§‰ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                document.getElementById('errorMsg').classList.remove('hidden');
                return null;
            }
            document.getElementById('errorMsg').classList.add('hidden');
            return getPromptByMode(currentAnalysisMode, document.getElementById('videoTitle').value, document.getElementById('youtubeUrl').value, transcript);
        }

        async function runWithClaude() {
            const content = buildDocumentContent();
            if (!content) return;
            document.getElementById('output').textContent = content;
            document.getElementById('placeholder').classList.add('hidden');
            ['formatBadge', 'layoutBadge', 'densityBadge', 'explainBadge'].forEach(id => document.getElementById(id).classList.remove('hidden'));
            updateQuizBadge();
            try { await navigator.clipboard.writeText(content); }
            catch (err) { const ta = document.createElement('textarea'); ta.value = content; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); }
            document.getElementById('runModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function openClaudeNow() { window.open('https://claude.ai/new', '_blank'); closeRunModal(); }

        async function copyToClipboard() {
            const content = buildDocumentContent();
            if (!content) return;
            try { await navigator.clipboard.writeText(content); }
            catch (err) { const ta = document.createElement('textarea'); ta.value = content; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); }
            alert('âœ… í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function resetAll() { openResetModal(); }

        function confirmReset() {
            document.getElementById('youtubeUrl').value = '';
            document.getElementById('videoTitle').value = '';
            document.getElementById('transcript').value = '';
            document.getElementById('output').textContent = '';
            document.getElementById('placeholder').classList.remove('hidden');
            ['formatBadge', 'layoutBadge', 'densityBadge', 'explainBadge', 'quizBadge', 'errorMsg', 'successMsg', 'loadingMsg', 'fileInfo'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById('transcriptInfo').textContent = '';
            document.getElementById('fileInput').value = '';
            document.getElementById('modalFileInput').value = '';
            setAnalysisMode('auto');
            setFileFormat('auto');
            setDocLayout('auto');
            // ìŠ¬ë¼ì´ë” ì´ˆê¸°í™”
            document.getElementById('densitySlider').value = 4;
            document.getElementById('explainSlider').value = 4;
            updateDensity(4);
            updateExplain(4);
            // ì‹œí—˜ë¬¸ì œ ì´ˆê¸°í™”
            quizEnabled = false;
            quizCount = 10;
            document.getElementById('quizToggle').classList.remove('active');
            document.getElementById('quizOptions').classList.add('hidden');
            document.getElementById('quizSlider').value = 10;
            document.getElementById('quizInput').value = 10;
            document.getElementById('quizSeparateDoc').checked = true;
            closeResetModal();
        }

        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') { closeTranscriptModal(); closeRunModal(); closeResetModal(); } });
        document.getElementById('transcriptModal').addEventListener('click', function(e) { if (e.target === this) closeTranscriptModal(); });
        document.getElementById('runModal').addEventListener('click', function(e) { if (e.target === this) closeRunModal(); });
        document.getElementById('resetModal').addEventListener('click', function(e) { if (e.target === this) closeResetModal(); });

        // ì´ˆê¸° ë°°ì§€ ì„¤ì •
        updateDensity(4);
        updateExplain(4);
    </script>
</body>
</html>
