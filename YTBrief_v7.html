<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ íŠœë¸Œ ì˜ìƒ ì •ë¦¬ ë„êµ¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .modal-overlay {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }
        .file-drop-zone {
            border: 2px dashed #475569;
            transition: all 0.3s ease;
        }
        .file-drop-zone:hover, .file-drop-zone.drag-over {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        .claude-btn {
            background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
        }
        .claude-btn:hover {
            background: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
        }
        .service-card {
            transition: all 0.2s ease;
        }
        .service-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .step-indicator {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
        }
        .format-btn, .layout-btn {
            transition: all 0.2s ease;
        }
        .format-btn:hover, .layout-btn:hover {
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-6">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">
                ğŸ“º ìœ íŠœë¸Œ ì˜ìƒ ì •ë¦¬ ë„êµ¬
            </h1>
            <p class="text-slate-400 text-sm">
                ë‚´ìš©ì— ë§ëŠ” ì „ë¬¸ ë¶„ì„ ë¬¸ì„œ ìë™ ìƒì„± â†’ Claude ìë™ ì‹¤í–‰
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
            <!-- ì…ë ¥ ì˜ì—­ -->
            <div class="space-y-4">
                <!-- ìœ íŠœë¸Œ URL ì…ë ¥ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-2">
                        ğŸ”— ìœ íŠœë¸Œ ë§í¬
                    </label>
                    <input
                        type="text"
                        id="youtubeUrl"
                        placeholder="https://www.youtube.com/watch?v=..."
                        class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                    <p id="loadingMsg" class="text-blue-400 text-sm mt-2 hidden">
                        â³ ì˜ìƒ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...
                    </p>
                    <p id="errorMsg" class="text-red-400 text-sm mt-2 hidden"></p>
                    <p id="successMsg" class="text-green-400 text-sm mt-2 hidden"></p>
                </div>

                <!-- ì˜ìƒ ì œëª© í‘œì‹œ/ìˆ˜ì • -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-2">
                        ğŸ“Œ ì˜ìƒ ì œëª©
                    </label>
                    <input
                        type="text"
                        id="videoTitle"
                        placeholder="ì˜ìƒ ì œëª©ì´ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤ (ë˜ëŠ” ì§ì ‘ ì…ë ¥)"
                        class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>

                <!-- ë¶„ì„ ëª¨ë“œ ì„ íƒ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <label class="block text-sm font-medium text-slate-300 mb-3">
                        ğŸ¯ ë¶„ì„ ëª¨ë“œ
                    </label>
                    <div class="grid grid-cols-3 gap-2">
                        <button
                            onclick="setAnalysisMode('auto')"
                            id="modeAuto"
                            class="mode-btn px-3 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-purple-400 ring-offset-2 ring-offset-slate-800"
                        >
                            <span class="block text-base mb-0.5">ğŸ¤–</span>
                            ìë™ íŒë‹¨
                        </button>
                        <button
                            onclick="setAnalysisMode('finance')"
                            id="modeFinance"
                            class="mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                        >
                            <span class="block text-base mb-0.5">ğŸ“ˆ</span>
                            ë¯¸êµ­ì¦ì‹œ/ê²½ì œ
                        </button>
                        <button
                            onclick="setAnalysisMode('general')"
                            id="modeGeneral"
                            class="mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                        >
                            <span class="block text-base mb-0.5">ğŸ“š</span>
                            ì¼ë°˜ ë¶„ì„
                        </button>
                    </div>
                    <p id="modeDescription" class="text-slate-400 text-xs mt-2">
                        ğŸ’¡ Claudeê°€ ë‚´ìš©ì„ íŒŒì•…í•˜ì—¬ ìë™ìœ¼ë¡œ ë¶„ì„ ë°©í–¥ì„ ê²°ì •í•©ë‹ˆë‹¤.
                    </p>
                </div>

                <!-- ì¶œë ¥ ì˜µì…˜: íŒŒì¼ í˜•ì‹ + ë ˆì´ì•„ì›ƒ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- íŒŒì¼ í˜•ì‹ -->
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">
                                ğŸ“ íŒŒì¼ í˜•ì‹
                            </label>
                            <div class="grid grid-cols-4 gap-1.5">
                                <button
                                    onclick="setFileFormat('auto')"
                                    id="formatAuto"
                                    class="format-btn px-2 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-amber-400 ring-offset-1 ring-offset-slate-800"
                                >
                                    <span class="block text-sm">ğŸ¤–</span>
                                    <span class="text-[10px]">ìë™</span>
                                </button>
                                <button
                                    onclick="setFileFormat('docx')"
                                    id="formatDocx"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ“</span>
                                    <span class="text-[10px]">.docx</span>
                                </button>
                                <button
                                    onclick="setFileFormat('md')"
                                    id="formatMd"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ“‹</span>
                                    <span class="text-[10px]">.md</span>
                                </button>
                                <button
                                    onclick="setFileFormat('html')"
                                    id="formatHtml"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸŒ</span>
                                    <span class="text-[10px]">.html</span>
                                </button>
                                <button
                                    onclick="setFileFormat('pdf')"
                                    id="formatPdf"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ“„</span>
                                    <span class="text-[10px]">.pdf</span>
                                </button>
                                <button
                                    onclick="setFileFormat('txt')"
                                    id="formatTxt"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ“ƒ</span>
                                    <span class="text-[10px]">.txt</span>
                                </button>
                                <button
                                    onclick="setFileFormat('jsx')"
                                    id="formatJsx"
                                    class="format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">âš›ï¸</span>
                                    <span class="text-[10px]">.jsx</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ë¬¸ì„œ ë ˆì´ì•„ì›ƒ -->
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">
                                ğŸ“ ë¬¸ì„œ ë ˆì´ì•„ì›ƒ
                            </label>
                            <div class="grid grid-cols-3 gap-1.5">
                                <button
                                    onclick="setDocLayout('auto')"
                                    id="layoutAuto"
                                    class="layout-btn px-2 py-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white text-xs font-medium rounded-lg transition-all ring-2 ring-teal-400 ring-offset-1 ring-offset-slate-800"
                                >
                                    <span class="block text-sm">ğŸ¤–</span>
                                    <span class="text-[10px]">ìë™</span>
                                </button>
                                <button
                                    onclick="setDocLayout('pc')"
                                    id="layoutPc"
                                    class="layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ–¥ï¸</span>
                                    <span class="text-[10px]">PC</span>
                                </button>
                                <button
                                    onclick="setDocLayout('mobile')"
                                    id="layoutMobile"
                                    class="layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all"
                                >
                                    <span class="block text-sm">ğŸ“±</span>
                                    <span class="text-[10px]">Mobile</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <p id="outputDescription" class="text-slate-400 text-xs mt-3">
                        ğŸ“ ìë™ íŒŒì¼ í˜•ì‹ | ğŸ“ ìë™ ë ˆì´ì•„ì›ƒ
                    </p>
                </div>

                <!-- ìë§‰ ì…ë ¥ -->
                <div class="bg-slate-800 rounded-xl p-4 md:p-5 border border-slate-700">
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-medium text-slate-300">
                            ğŸ“ ìë§‰ ë‚´ìš©
                        </label>
                        <div class="flex gap-2">
                            <button
                                onclick="openTranscriptModal()"
                                id="fetchTranscriptBtn"
                                class="px-3 py-1.5 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-1"
                            >
                                <span>ğŸ“¥</span> ìë§‰ ê°€ì ¸ì˜¤ê¸°
                            </button>
                            <button
                                onclick="clearTranscript()"
                                class="px-3 py-1.5 bg-slate-600 hover:bg-slate-700 text-white text-xs font-medium rounded-lg transition-colors"
                            >
                                ì§€ìš°ê¸°
                            </button>
                        </div>
                    </div>
                    
                    <!-- íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ -->
                    <div 
                        id="fileDropZone"
                        class="file-drop-zone rounded-lg p-3 mb-3 text-center cursor-pointer"
                        onclick="document.getElementById('fileInput').click()"
                    >
                        <input 
                            type="file" 
                            id="fileInput" 
                            accept=".txt,.srt,.vtt,.sub,.ass,.ssa,.sbv,.json"
                            class="hidden"
                            onchange="handleFileUpload(event)"
                        />
                        <div class="text-slate-400 text-sm">
                            <span class="text-xl">ğŸ“</span>
                            <span class="ml-2">ìë§‰ íŒŒì¼ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­</span>
                            <span class="text-xs text-slate-500 ml-1">(TXT, SRT, VTT, SUB, ASS, SBV, JSON)</span>
                        </div>
                    </div>
                    <p id="fileInfo" class="text-green-400 text-xs mb-2 hidden"></p>
                    
                    <textarea
                        id="transcript"
                        placeholder="ìœ íŠœë¸Œ ìë§‰ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ê±°ë‚˜, íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜, 'ìë§‰ ê°€ì ¸ì˜¤ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”..."
                        rows="6"
                        class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none custom-scrollbar"
                    ></textarea>
                    <p id="transcriptInfo" class="text-slate-500 text-xs mt-2"></p>
                </div>

                <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                <div class="space-y-3">
                    <!-- Claude ì‹¤í–‰ ë²„íŠ¼ (ë©”ì¸) -->
                    <button
                        onclick="runWithClaude()"
                        id="claudeBtn"
                        class="w-full px-6 py-4 claude-btn text-white font-bold rounded-xl transition-all text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        ğŸš€ Claudeì—ì„œ ë¶„ì„ ì‹¤í–‰
                    </button>
                    
                    <div class="flex gap-2">
                        <button
                            onclick="generateDocument()"
                            class="flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors text-sm"
                        >
                            ğŸ“„ ë¯¸ë¦¬ë³´ê¸°
                        </button>
                        <button
                            onclick="copyToClipboard()"
                            class="flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors text-sm"
                        >
                            ğŸ“‹ ë³µì‚¬
                        </button>
                        <button
                            onclick="resetAll()"
                            class="px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors text-sm flex items-center gap-1"
                        >
                            ğŸ”„ ë¦¬ì…‹
                        </button>
                    </div>
                </div>

                <!-- ì‚¬ìš©ë²• ì•ˆë‚´ -->
                <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700">
                    <h3 class="text-sm font-medium text-slate-300 mb-2">ğŸ’¡ ì‚¬ìš© ë°©ë²•</h3>
                    <ol class="text-xs text-slate-400 space-y-1 list-decimal list-inside">
                        <li>ìœ íŠœë¸Œ ë§í¬ ë¶™ì—¬ë„£ê¸° â†’ ì œëª© ìë™ ì…ë ¥</li>
                        <li>ë¶„ì„ ëª¨ë“œ & ì¶œë ¥ ì˜µì…˜ ì„ íƒ (ê¸°ë³¸: ìë™)</li>
                        <li><strong class="text-green-400">"ìë§‰ ê°€ì ¸ì˜¤ê¸°"</strong> í´ë¦­ â†’ ìë§‰ ì¶”ê°€</li>
                        <li><strong class="text-orange-400">"Claudeì—ì„œ ë¶„ì„ ì‹¤í–‰"</strong> ë²„íŠ¼ í´ë¦­</li>
                    </ol>
                </div>
            </div>

            <!-- ì¶œë ¥ ì˜ì—­ -->
            <div class="bg-slate-800 rounded-xl border border-slate-700 flex flex-col h-fit lg:h-auto">
                <div class="flex items-center justify-between px-4 md:px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-medium text-slate-300">
                        ğŸ“‹ ìƒì„±ë  ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°
                    </h2>
                    <div class="flex items-center gap-2">
                        <span id="formatBadge" class="px-2 py-1 bg-amber-600/20 text-amber-400 text-xs rounded hidden">
                            ìë™
                        </span>
                        <span id="layoutBadge" class="px-2 py-1 bg-teal-600/20 text-teal-400 text-xs rounded hidden">
                            ìë™
                        </span>
                        <span id="previewBadge" class="px-2 py-1 bg-slate-700 text-slate-400 text-xs rounded hidden">
                            ë¯¸ë¦¬ë³´ê¸°
                        </span>
                    </div>
                </div>
                <div class="flex-1 p-4 md:p-5 overflow-auto custom-scrollbar" style="max-height: 500px;">
                    <pre id="output" class="text-sm text-slate-300 whitespace-pre-wrap font-mono leading-relaxed"></pre>
                    <div id="placeholder" class="h-48 flex items-center justify-center text-slate-500 text-center">
                        <div>
                            <p class="text-4xl mb-3">ğŸ“</p>
                            <p>ìœ íŠœë¸Œ ë§í¬ì™€ ìë§‰ì„ ì…ë ¥í•˜ë©´</p>
                            <p>ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í•˜ë‹¨ ì •ë³´ -->
        <div class="mt-6 text-center text-xs text-slate-500">
            <p>"Claudeì—ì„œ ë¶„ì„ ì‹¤í–‰" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìë™ìœ¼ë¡œ ë³µì‚¬ í›„ Claudeê°€ ì—´ë¦½ë‹ˆë‹¤.</p>
        </div>
    </div>

    <!-- ìë§‰ ê°€ì ¸ì˜¤ê¸° ëª¨ë‹¬ -->
    <div id="transcriptModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-3xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-700">
                <h3 class="text-lg font-semibold text-white">ğŸ“¥ ìë§‰ ê°€ì ¸ì˜¤ê¸°</h3>
                <button onclick="closeTranscriptModal()" class="text-slate-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="p-6 overflow-auto custom-scrollbar" style="max-height: calc(90vh - 140px);">
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-orange-600 text-white">1</span>
                        <h4 class="text-sm font-medium text-orange-400">íŒŒì¼ ì—…ë¡œë“œ (ê°€ì¥ ê°„í¸)</h4>
                        <span class="px-2 py-0.5 bg-orange-600/20 text-orange-400 text-xs rounded-full">ì¶”ì²œ</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <div 
                            id="modalFileDropZone"
                            class="file-drop-zone rounded-lg p-6 text-center cursor-pointer"
                            onclick="document.getElementById('modalFileInput').click()"
                        >
                            <input 
                                type="file" 
                                id="modalFileInput" 
                                accept=".txt,.srt,.vtt,.sub,.ass,.ssa,.sbv,.json"
                                class="hidden"
                                onchange="handleModalFileUpload(event)"
                            />
                            <div class="text-slate-400">
                                <span class="text-3xl">ğŸ“</span>
                                <p class="mt-2 font-medium">ìë§‰ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­</p>
                                <p class="text-xs text-slate-500 mt-1">TXT, SRT, VTT, SUB, ASS, SBV, JSON ì§€ì›</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-blue-600 text-white">2</span>
                        <h4 class="text-sm font-medium text-blue-400">ì™¸ë¶€ ì„œë¹„ìŠ¤ì—ì„œ ë‹¤ìš´ë¡œë“œ</h4>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <p class="text-slate-300 text-sm mb-4">ì•„ë˜ ì„œë¹„ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ í´ë¦­ â†’ TXT ë‹¤ìš´ë¡œë“œ â†’ ìœ„ì— ì—…ë¡œë“œ</p>
                        
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('downsub')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold">DS</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">DownSub</h5>
                                        <p class="text-slate-400 text-xs">ê°€ì¥ ë§ì´ ì‚¬ìš©</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('youtubetranscript')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-purple-600 rounded flex items-center justify-center text-white text-xs font-bold">YT</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">YouTubeTranscript</h5>
                                        <p class="text-slate-400 text-xs">ë¹ ë¥¸ ì¶”ì¶œ</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('savesubs')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-green-600 rounded flex items-center justify-center text-white text-xs font-bold">SS</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">SaveSubs</h5>
                                        <p class="text-slate-400 text-xs">ë‹¤ì–‘í•œ í˜•ì‹</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('ytsubs')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-red-600 rounded flex items-center justify-center text-white text-xs font-bold">DC</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">DownloadCaptions</h5>
                                        <p class="text-slate-400 text-xs">ì‹¬í”Œ</p>
                                    </div>
                                </div>
                            </div>

                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('subtitlebee')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-yellow-600 rounded flex items-center justify-center text-white text-xs font-bold">ğŸ</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">SubtitleBee</h5>
                                        <p class="text-slate-400 text-xs">ë¬´ë£Œ</p>
                                    </div>
                                </div>
                            </div>

                            <div class="service-card bg-slate-800 rounded-lg p-3 border border-slate-600 cursor-pointer" onclick="openExternalService('sstome')">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center text-white text-xs font-bold">SD</div>
                                    <div>
                                        <h5 class="text-white font-medium text-xs">SSTo.me</h5>
                                        <p class="text-slate-400 text-xs">ë¹ ë¥¸ ë‹¤ìš´</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="step-indicator bg-red-600 text-white">3</span>
                        <h4 class="text-sm font-medium text-red-400">ìœ íŠœë¸Œì—ì„œ ì§ì ‘ ë³µì‚¬</h4>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 border border-slate-600">
                        <div class="text-slate-300 text-sm space-y-2">
                            <p>â‘  ì˜ìƒ ì•„ë˜ <strong class="text-white">"...ë”ë³´ê¸°"</strong> â†’ <strong class="text-white">"ìŠ¤í¬ë¦½íŠ¸ í‘œì‹œ"</strong></p>
                            <p>â‘¡ ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ ì„ íƒ <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+A</kbd> â†’ ë³µì‚¬ <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+C</kbd></p>
                            <p>â‘¢ ìë§‰ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸° <kbd class="px-1 py-0.5 bg-slate-700 rounded text-xs">Ctrl+V</kbd></p>
                        </div>
                        <button
                            onclick="openYoutubeVideo()"
                            class="mt-3 w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors"
                        >
                            â–¶ï¸ ìœ íŠœë¸Œ ì˜ìƒ ì—´ê¸°
                        </button>
                    </div>
                </div>

                <div class="p-3 bg-yellow-900/30 border border-yellow-700/50 rounded-lg">
                    <p class="text-yellow-300 text-xs flex items-start gap-2">
                        <span>âš ï¸</span>
                        <span>ìë§‰ì´ ì—†ëŠ” ì˜ìƒì€ ìë§‰ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
                    </p>
                </div>
            </div>

            <div class="px-6 py-4 border-t border-slate-700 bg-slate-800/50">
                <button
                    onclick="closeTranscriptModal()"
                    class="w-full px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors"
                >
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ì‹¤í–‰ ì•ˆë‚´ ëª¨ë‹¬ -->
    <div id="runModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-md w-full overflow-hidden">
            <div class="p-6 text-center">
                <div class="text-5xl mb-4">âœ…</div>
                <h3 class="text-xl font-bold text-white mb-2">í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                <p class="text-slate-400 mb-6">Claude ì°½ì—ì„œ ë¶™ì—¬ë„£ê¸°(Ctrl+V)ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>
                
                <div class="bg-slate-900 rounded-lg p-4 mb-6">
                    <p class="text-slate-300 text-sm">
                        <span class="text-orange-400 font-bold">ë‹¤ìŒ ë‹¨ê³„:</span><br/>
                        ì—´ë¦¬ëŠ” Claude ì°½ì—ì„œ<br/>
                        <kbd class="px-2 py-1 bg-slate-700 rounded text-white">Ctrl</kbd> + <kbd class="px-2 py-1 bg-slate-700 rounded text-white">V</kbd> ë¥¼ ëˆŒëŸ¬ ë¶™ì—¬ë„£ê¸°
                    </p>
                </div>
                
                <div class="flex gap-3">
                    <button
                        onclick="openClaudeNow()"
                        class="flex-1 px-4 py-3 claude-btn text-white font-bold rounded-lg transition-colors"
                    >
                        Claude ì—´ê¸° â†’
                    </button>
                    <button
                        onclick="closeRunModal()"
                        class="px-4 py-3 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors"
                    >
                        ë‹«ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¦¬ì…‹ í™•ì¸ ëª¨ë‹¬ -->
    <div id="resetModal" class="fixed inset-0 modal-overlay z-50 hidden flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-2xl border border-slate-700 max-w-sm w-full overflow-hidden">
            <div class="p-6 text-center">
                <div class="text-5xl mb-4">ğŸ”„</div>
                <h3 class="text-xl font-bold text-white mb-2">ì „ì²´ ë¦¬ì…‹</h3>
                <p class="text-slate-400 mb-6">ëª¨ë“  ì…ë ¥ ë‚´ìš©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                
                <div class="flex gap-3">
                    <button
                        onclick="confirmReset()"
                        class="flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors"
                    >
                        ì´ˆê¸°í™”
                    </button>
                    <button
                        onclick="closeResetModal()"
                        class="flex-1 px-4 py-3 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors"
                    >
                        ì·¨ì†Œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentAnalysisMode = 'auto';
        let currentFileFormat = 'auto';
        let currentDocLayout = 'auto';

        function getCurrentDate() {
            const now = new Date();
            return `${now.getFullYear()}ë…„ ${now.getMonth() + 1}ì›” ${now.getDate()}ì¼`;
        }

        function setAnalysisMode(mode) {
            currentAnalysisMode = mode;
            const buttons = { 'auto': 'modeAuto', 'finance': 'modeFinance', 'general': 'modeGeneral' };
            const colors = {
                'auto': 'from-purple-600 to-blue-600 ring-purple-400',
                'finance': 'from-green-600 to-emerald-600 ring-green-400',
                'general': 'from-blue-600 to-cyan-600 ring-blue-400'
            };
            
            Object.keys(buttons).forEach(key => {
                const btn = document.getElementById(buttons[key]);
                if (key === mode) {
                    btn.className = `mode-btn px-3 py-2.5 bg-gradient-to-r ${colors[key]} text-white text-xs font-medium rounded-lg transition-all ring-2 ring-offset-2 ring-offset-slate-800`;
                } else {
                    btn.className = 'mode-btn px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
                }
            });
            
            const descriptions = {
                'auto': 'ğŸ’¡ Claudeê°€ ë‚´ìš©ì„ íŒŒì•…í•˜ì—¬ ìë™ìœ¼ë¡œ ë¶„ì„ ë°©í–¥ì„ ê²°ì •í•©ë‹ˆë‹¤.',
                'finance': 'ğŸ“ˆ ë¯¸êµ­ ì¦ì‹œ, ê²½ì œ, íˆ¬ì ê´€ì ì—ì„œ ë¶„ì„í•©ë‹ˆë‹¤.',
                'general': 'ğŸ“š í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì ì—ì„œ ë¶„ì„í•©ë‹ˆë‹¤.'
            };
            document.getElementById('modeDescription').textContent = descriptions[mode];
        }

        function setFileFormat(format) {
            currentFileFormat = format;
            const formats = ['auto', 'docx', 'md', 'html', 'pdf', 'txt', 'jsx'];
            const colors = {
                'auto': { bg: 'from-amber-600 to-orange-600', ring: 'ring-amber-400' },
                'docx': { bg: 'from-blue-600 to-blue-700', ring: 'ring-blue-400' },
                'md': { bg: 'from-slate-600 to-slate-700', ring: 'ring-slate-400' },
                'html': { bg: 'from-orange-600 to-red-600', ring: 'ring-orange-400' },
                'pdf': { bg: 'from-red-600 to-red-700', ring: 'ring-red-400' },
                'txt': { bg: 'from-gray-600 to-gray-700', ring: 'ring-gray-400' },
                'jsx': { bg: 'from-cyan-600 to-blue-600', ring: 'ring-cyan-400' }
            };
            
            formats.forEach(f => {
                const btn = document.getElementById('format' + f.charAt(0).toUpperCase() + f.slice(1));
                if (btn) {
                    if (f === format) {
                        btn.className = `format-btn px-2 py-2 bg-gradient-to-r ${colors[f].bg} text-white text-xs font-medium rounded-lg transition-all ring-2 ${colors[f].ring} ring-offset-1 ring-offset-slate-800`;
                    } else {
                        btn.className = 'format-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
                    }
                }
            });
            updateOutputDescription();
            updateBadges();
        }

        function setDocLayout(layout) {
            currentDocLayout = layout;
            const layouts = ['auto', 'pc', 'mobile'];
            const colors = {
                'auto': { bg: 'from-teal-600 to-cyan-600', ring: 'ring-teal-400' },
                'pc': { bg: 'from-indigo-600 to-purple-600', ring: 'ring-indigo-400' },
                'mobile': { bg: 'from-pink-600 to-rose-600', ring: 'ring-pink-400' }
            };
            
            layouts.forEach(l => {
                const btn = document.getElementById('layout' + l.charAt(0).toUpperCase() + l.slice(1));
                if (btn) {
                    if (l === layout) {
                        btn.className = `layout-btn px-2 py-2 bg-gradient-to-r ${colors[l].bg} text-white text-xs font-medium rounded-lg transition-all ring-2 ${colors[l].ring} ring-offset-1 ring-offset-slate-800`;
                    } else {
                        btn.className = 'layout-btn px-2 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-all';
                    }
                }
            });
            updateOutputDescription();
            updateBadges();
        }

        function updateOutputDescription() {
            const formatTexts = { 'auto': 'ìë™', 'docx': '.docx', 'md': '.md', 'html': '.html', 'pdf': '.pdf', 'txt': '.txt', 'jsx': '.jsx' };
            const layoutTexts = { 'auto': 'ìë™', 'pc': 'PC', 'mobile': 'Mobile' };
            document.getElementById('outputDescription').textContent = `ğŸ“ ${formatTexts[currentFileFormat]} íŒŒì¼ í˜•ì‹ | ğŸ“ ${layoutTexts[currentDocLayout]} ë ˆì´ì•„ì›ƒ`;
        }

        function updateBadges() {
            const formatBadge = document.getElementById('formatBadge');
            const layoutBadge = document.getElementById('layoutBadge');
            const formatTexts = { 'auto': 'ìë™', 'docx': '.docx', 'md': '.md', 'html': '.html', 'pdf': '.pdf', 'txt': '.txt', 'jsx': '.jsx' };
            const layoutTexts = { 'auto': 'ìë™', 'pc': 'PC', 'mobile': 'Mobile' };
            formatBadge.textContent = formatTexts[currentFileFormat];
            layoutBadge.textContent = layoutTexts[currentDocLayout];
        }

        function extractVideoId(url) {
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
                /youtube\.com\/shorts\/([^&\n?#]+)/
            ];
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match) return match[1];
            }
            return null;
        }

        async function fetchVideoTitle(url) {
            const loadingMsg = document.getElementById('loadingMsg');
            const errorMsg = document.getElementById('errorMsg');
            const successMsg = document.getElementById('successMsg');
            
            loadingMsg.classList.remove('hidden');
            errorMsg.classList.add('hidden');
            successMsg.classList.add('hidden');
            
            try {
                const response = await fetch(`https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`);
                if (!response.ok) throw new Error();
                const data = await response.json();
                document.getElementById('videoTitle').value = data.title;
                successMsg.textContent = 'âœ… ì˜ìƒ ì •ë³´ ì™„ë£Œ! ìë§‰ì„ ì¶”ê°€í•˜ì„¸ìš”.';
                successMsg.classList.remove('hidden');
            } catch (err) {
                errorMsg.textContent = 'âš ï¸ ì œëª©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorMsg.classList.remove('hidden');
            } finally {
                loadingMsg.classList.add('hidden');
            }
        }

        document.getElementById('youtubeUrl').addEventListener('input', function(e) {
            if (extractVideoId(e.target.value)) fetchVideoTitle(e.target.value);
        });

        function handleFileUpload(event) {
            if (event.target.files[0]) processFile(event.target.files[0]);
        }

        function handleModalFileUpload(event) {
            if (event.target.files[0]) {
                processFile(event.target.files[0]);
                closeTranscriptModal();
            }
        }

        function processFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                let content = e.target.result;
                const fileName = file.name.toLowerCase();
                
                if (fileName.endsWith('.srt') || fileName.endsWith('.vtt') || fileName.endsWith('.sbv')) {
                    content = cleanSubtitleFormat(content);
                } else if (fileName.endsWith('.ass') || fileName.endsWith('.ssa')) {
                    content = cleanASSFormat(content);
                } else if (fileName.endsWith('.json')) {
                    content = cleanJSONFormat(content);
                }
                
                document.getElementById('transcript').value = content;
                document.getElementById('fileInfo').textContent = `âœ… "${file.name}" ë¡œë“œë¨`;
                document.getElementById('fileInfo').classList.remove('hidden');
                updateTranscriptInfo();
            };
            reader.readAsText(file);
        }

        function cleanSubtitleFormat(content) {
            return content
                .replace(/^\d+\s*$/gm, '')
                .replace(/\d{1,2}:\d{2}:\d{2}[,\.]\d{3}\s*-->\s*\d{1,2}:\d{2}:\d{2}[,\.]\d{3}/g, '')
                .replace(/\d{1,2}:\d{2}[,\.]\d{3}\s*,\s*\d{1,2}:\d{2}[,\.]\d{3}/g, '')
                .replace(/WEBVTT.*$/gm, '')
                .replace(/<[^>]+>/g, '')
                .replace(/\{[^}]+\}/g, '')
                .replace(/\n{3,}/g, '\n\n')
                .trim();
        }

        function cleanASSFormat(content) {
            return content.split('\n')
                .filter(line => line.startsWith('Dialogue:'))
                .map(line => {
                    const parts = line.split(',');
                    if (parts.length >= 10) {
                        return parts.slice(9).join(',').replace(/\{[^}]+\}/g, '').replace(/\\N/g, ' ').trim();
                    }
                    return '';
                })
                .filter(Boolean)
                .join('\n');
        }

        function cleanJSONFormat(content) {
            try {
                const data = JSON.parse(content);
                if (Array.isArray(data)) return data.map(item => item.text || item.content || '').join(' ');
                if (data.events) return data.events.filter(e => e.segs).map(e => e.segs.map(s => s.utf8).join('')).join(' ');
                if (data.transcript) return data.transcript;
                return content;
            } catch (e) { return content; }
        }

        function setupDragAndDrop(elementId) {
            const dropZone = document.getElementById(elementId);
            if (!dropZone) return;
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); }, false));
            ['dragenter', 'dragover'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.add('drag-over'), false));
            ['dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, () => dropZone.classList.remove('drag-over'), false));
            dropZone.addEventListener('drop', (e) => {
                if (e.dataTransfer.files.length > 0) {
                    processFile(e.dataTransfer.files[0]);
                    if (elementId === 'modalFileDropZone') closeTranscriptModal();
                }
            }, false);
        }

        setupDragAndDrop('fileDropZone');
        setupDragAndDrop('modalFileDropZone');

        function openTranscriptModal() { document.getElementById('transcriptModal').classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeTranscriptModal() { document.getElementById('transcriptModal').classList.add('hidden'); document.body.style.overflow = ''; }
        function closeRunModal() { document.getElementById('runModal').classList.add('hidden'); document.body.style.overflow = ''; }
        function openResetModal() { document.getElementById('resetModal').classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeResetModal() { document.getElementById('resetModal').classList.add('hidden'); document.body.style.overflow = ''; }

        function openExternalService(service) {
            const url = document.getElementById('youtubeUrl').value;
            const videoId = extractVideoId(url);
            const services = {
                'downsub': videoId ? `https://downsub.com/?url=${encodeURIComponent(url)}` : 'https://downsub.com/',
                'youtubetranscript': videoId ? `https://youtubetranscript.com/?v=${videoId}` : 'https://youtubetranscript.com/',
                'savesubs': videoId ? `https://savesubs.com/process?url=${encodeURIComponent(url)}` : 'https://savesubs.com/',
                'ytsubs': videoId ? `https://downloadyoutubesubtitle.com/?url=${encodeURIComponent(url)}` : 'https://downloadyoutubesubtitle.com/',
                'subtitlebee': 'https://subtitlebee.com/youtube-subtitle-downloader',
                'sstome': videoId ? `https://ssto.me/?url=${encodeURIComponent(url)}` : 'https://ssto.me/'
            };
            window.open(services[service], '_blank');
        }

        function openYoutubeVideo() {
            const url = document.getElementById('youtubeUrl').value;
            window.open(url || 'https://www.youtube.com/', '_blank');
        }

        function clearTranscript() {
            document.getElementById('transcript').value = '';
            document.getElementById('transcriptInfo').textContent = '';
            document.getElementById('fileInfo').classList.add('hidden');
        }

        function updateTranscriptInfo() {
            const text = document.getElementById('transcript').value;
            document.getElementById('transcriptInfo').textContent = `ê¸€ì ìˆ˜: ${text.length.toLocaleString()} | ë‹¨ì–´ ìˆ˜: ${text.trim() ? text.trim().split(/\s+/).length.toLocaleString() : 0}`;
        }

        document.getElementById('transcript').addEventListener('input', updateTranscriptInfo);

        function getFileFormatText() {
            const formats = {
                'auto': 'ë‚´ìš©ì— ê°€ì¥ ì í•©í•œ í˜•ì‹ì„ ìë™ ì„ íƒ',
                'docx': 'Word ë¬¸ì„œ (.docx)',
                'md': 'Markdown (.md)',
                'html': 'HTML (.html)',
                'pdf': 'PDF (.pdf)',
                'txt': 'í…ìŠ¤íŠ¸ (.txt)',
                'jsx': 'React ì»´í¬ë„ŒíŠ¸ (.jsx)'
            };
            return formats[currentFileFormat];
        }

        function getLayoutText() {
            const layouts = {
                'auto': 'ë‚´ìš©ì— ë”°ë¼ ìµœì  ë ˆì´ì•„ì›ƒ ìë™ ì„ íƒ',
                'pc': 'PC í™”ë©´ ìµœì í™” (ë„“ì€ ë ˆì´ì•„ì›ƒ, ë‹¤ë‹¨ êµ¬ì„±, ê°€ë¡œí˜• í…Œì´ë¸”, ì‚¬ì´ë“œë°” í™œìš©)',
                'mobile': 'ëª¨ë°”ì¼ í™”ë©´ ìµœì í™” (ë‹¨ì¼ ì»¬ëŸ¼, ì„¸ë¡œ ìŠ¤í¬ë¡¤, í„°ì¹˜ ì¹œí™”ì , ê°„ê²°í•œ êµ¬ì„±)'
            };
            return layouts[currentDocLayout];
        }

        function getPromptByMode(mode, videoTitle, youtubeUrl, transcript) {
            const header = `**Title:** ${videoTitle || '[ì˜ìƒ ì œëª©]'}
**Link:** ${youtubeUrl || '[ìœ íŠœë¸Œ ë§í¬]'}
**Date:** ${getCurrentDate()}

---

`;

            const outputOptions = `
ğŸ“ **ì¶œë ¥ íŒŒì¼ í˜•ì‹:** ${getFileFormatText()}
ğŸ“ **ë¬¸ì„œ ë ˆì´ì•„ì›ƒ:** ${getLayoutText()}
`;

            const commonRequirements = `
ğŸ“Œ ê³µí†µ ìš”ì²­ì‚¬í•­:
1. í•œë²ˆì— ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥í•˜ê²Œ ë³„ë„ì˜ ì°½ìœ¼ë¡œ ì‘ì„±
2. ìˆ˜ì¹˜ë‚˜ í†µê³„ëŠ” ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€
3. ë„í‘œ, ê·¸ë˜í”„ë¡œ ì‘ì„± ê°€ëŠ¥í•œ ê²ƒì€ ì´ë¯¸ì§€ë¡œ ì‘ì„±í•˜ì—¬ ë³¸ë¬¸ ì‚¬ì´ì— ì‚½ì…
4. ì´í•´í•˜ê¸° ì‰½ê²Œ ì„œìˆ í˜•ìœ¼ë¡œ, ì–´ë ¤ìš´ ë‚´ìš©ì€ ë¶€ì—°ì„¤ëª…
5. í‘œ, ê·¸ë˜í”„ëŠ” ê¹¨ì§€ì§€ ì•Šê²Œ ê¹”ë”í•˜ê²Œ ì‘ì„±
6. í…ìŠ¤íŠ¸ì— ì—†ëŠ” ë‚´ìš©ì€ ê³¼ë„í•˜ê²Œ ì¶”ê°€í•˜ì§€ ì•Šê¸°
7. ì¤‘ìš”í•œ ë¶€ë¶„ì€ ê°•ì¡°í•´ì„œ í‘œì‹œ
8. ì¤‘ê°„ì— ì¤‘ë‹¨í•˜ì§€ ë§ê³  ëê¹Œì§€ í•œë²ˆì— ì‘ì„±
9. HTML íŒŒì¼ ìƒì„± ì‹œ ë°˜ë“œì‹œ <head> ì•ˆì— <meta name="robots" content="noindex, nofollow"> íƒœê·¸ë¥¼ í¬í•¨í•˜ì—¬ ê²€ìƒ‰ì—”ì§„ ë…¸ì¶œ ì°¨ë‹¨

---

## ğŸ“ ì›ë³¸ ìë§‰ ë‚´ìš©

${transcript}

---

`;

            if (mode === 'auto') {
                return header + `ì•„ë˜ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
âš ï¸ **ì¤‘ìš”: ë¶„ì„ ë°©í–¥ ìë™ íŒë‹¨**

ë¨¼ì € ì•„ë˜ ìë§‰ ë‚´ìš©ì„ ì½ê³ , ì£¼ì œë¥¼ íŒŒì•…í•´ì£¼ì„¸ìš”:

1. **ë¯¸êµ­ ì¦ì‹œ/ê²½ì œ ê´€ë ¨ ë‚´ìš©ì¸ ê²½ìš°:**
   - ë¯¸êµ­ ì¦ì‹œ, ì£¼ì‹, íˆ¬ì, ê²½ì œ ì§€í‘œ, ì—°ì¤€(Fed), ê¸ˆë¦¬, ì¸í”Œë ˆì´ì…˜, GDP, ê³ ìš©ì§€í‘œ, ê¸°ì—… ì‹¤ì  ë“±ì˜ ë‚´ìš©ì´ë¼ë©´
   - â†’ ë¯¸êµ­ì¦ì‹œ/ê²½ì œì  ê´€ì ì—ì„œ ë§¤ìš° ìì„¸í•˜ê²Œ ë¶„ì„
   - â†’ íˆ¬ì ì‹œì‚¬ì , ì‹œì¥ ì „ë§, ì„¹í„°ë³„ ì˜í–¥ ë“± í¬í•¨

2. **ê·¸ ì™¸ ë‹¤ë¥¸ ì£¼ì œì¸ ê²½ìš°:**
   - ê¸°ìˆ , ê³¼í•™, ê±´ê°•, êµìœ¡, ì—­ì‚¬, ë¬¸í™”, ìŠ¤í¬ì¸ , ì •ì¹˜, ì‚¬íšŒ ë“± ë‹¤ë¥¸ ë¶„ì•¼ë¼ë©´
   - â†’ í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì ì—ì„œ ë¶„ì„
   - â†’ í•´ë‹¹ ë¶„ì•¼ì—ì„œ ì¤‘ìš”í•œ ê°œë…, ë§¥ë½, ì˜ë¯¸ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì •ë¦¬
   - â†’ ë¶„ì•¼ì— ë§ëŠ” ì „ë¬¸ ìš©ì–´ ì„¤ëª… ë° ë°°ê²½ ì§€ì‹ ì œê³µ
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”. ë¨¼ì € ì£¼ì œë¥¼ íŒŒì•…í•œ í›„, ì ì ˆí•œ ë¶„ì„ ë°©í–¥ìœ¼ë¡œ ì§„í–‰í•´ì£¼ì„¸ìš”.`;

            } else if (mode === 'finance') {
                return header + `ì•„ë˜ ë‚´ìš©ì„ **ë¯¸êµ­ ì¦ì‹œ ë° ê²½ì œì  ê´€ì **ì—ì„œ ìƒì„¸í•˜ê²Œ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
ğŸ“ˆ **ë¶„ì„ ë°©í–¥:**
- ë¯¸êµ­ ì¦ì‹œì— ë¯¸ì¹˜ëŠ” ì˜í–¥
- íˆ¬ì ì‹œì‚¬ì  ë° ì „ëµì  ê´€ì 
- ê´€ë ¨ ì„¹í„°/ì¢…ëª© ë¶„ì„
- ê±°ì‹œê²½ì œ ì§€í‘œì™€ì˜ ì—°ê´€ì„±
- ì—°ì¤€(Fed) ì •ì±… ì˜í–¥
- ì‹œì¥ ì‹¬ë¦¬ ë° ì „ë§
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ ë¯¸êµ­ì¦ì‹œ/ê²½ì œ ê´€ì ì—ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”.`;

            } else {
                return header + `ì•„ë˜ ë‚´ìš©ì„ **í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ì ì¸ ê´€ì **ì—ì„œ ìƒì„¸í•˜ê²Œ ë¶„ì„í•´ì£¼ì„¸ìš”.
${outputOptions}
ğŸ“š **ë¶„ì„ ë°©í–¥:**
- í•µì‹¬ ì£¼ì œì™€ ë©”ì‹œì§€ íŒŒì•…
- í•´ë‹¹ ë¶„ì•¼ì˜ ë§¥ë½ì—ì„œ ì¤‘ìš”í•œ í¬ì¸íŠ¸
- ì „ë¬¸ ìš©ì–´ ë° ê°œë… ì„¤ëª…
- ê´€ë ¨ ë°°ê²½ ì§€ì‹ ì œê³µ
- ì‹¤ìš©ì  ì‹œì‚¬ì  ë° ì ìš© ë°©ì•ˆ
- ì¶”ê°€ë¡œ ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´
` + commonRequirements + `ìœ„ ë‚´ìš©ì„ í•´ë‹¹ ë¶„ì•¼ì— ë§ê²Œ ì „ë¬¸ì ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”.`;
            }
        }

        function generateDocument() {
            const content = buildDocumentContent();
            if (!content) return;
            
            document.getElementById('output').textContent = content;
            document.getElementById('placeholder').classList.add('hidden');
            document.getElementById('previewBadge').classList.remove('hidden');
            document.getElementById('formatBadge').classList.remove('hidden');
            document.getElementById('layoutBadge').classList.remove('hidden');
        }

        function buildDocumentContent() {
            const transcript = document.getElementById('transcript').value;
            if (!transcript.trim()) {
                document.getElementById('errorMsg').textContent = 'âš ï¸ ìë§‰ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                document.getElementById('errorMsg').classList.remove('hidden');
                return null;
            }
            document.getElementById('errorMsg').classList.add('hidden');
            return getPromptByMode(
                currentAnalysisMode,
                document.getElementById('videoTitle').value,
                document.getElementById('youtubeUrl').value,
                transcript
            );
        }

        async function runWithClaude() {
            const content = buildDocumentContent();
            if (!content) return;

            document.getElementById('output').textContent = content;
            document.getElementById('placeholder').classList.add('hidden');
            document.getElementById('previewBadge').classList.remove('hidden');
            document.getElementById('formatBadge').classList.remove('hidden');
            document.getElementById('layoutBadge').classList.remove('hidden');

            try { await navigator.clipboard.writeText(content); }
            catch (err) {
                const ta = document.createElement('textarea');
                ta.value = content;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
            }

            document.getElementById('runModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function openClaudeNow() {
            window.open('https://claude.ai/new', '_blank');
            closeRunModal();
        }

        async function copyToClipboard() {
            const content = buildDocumentContent();
            if (!content) return;
            try { await navigator.clipboard.writeText(content); }
            catch (err) {
                const ta = document.createElement('textarea');
                ta.value = content;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
            }
            alert('âœ… í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function resetAll() { openResetModal(); }

        function confirmReset() {
            document.getElementById('youtubeUrl').value = '';
            document.getElementById('videoTitle').value = '';
            document.getElementById('transcript').value = '';
            document.getElementById('output').textContent = '';
            document.getElementById('placeholder').classList.remove('hidden');
            ['previewBadge', 'formatBadge', 'layoutBadge', 'errorMsg', 'successMsg', 'loadingMsg', 'fileInfo'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById('transcriptInfo').textContent = '';
            document.getElementById('fileInput').value = '';
            document.getElementById('modalFileInput').value = '';
            setAnalysisMode('auto');
            setFileFormat('auto');
            setDocLayout('auto');
            closeResetModal();
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') { closeTranscriptModal(); closeRunModal(); closeResetModal(); }
        });

        document.getElementById('transcriptModal').addEventListener('click', function(e) { if (e.target === this) closeTranscriptModal(); });
        document.getElementById('runModal').addEventListener('click', function(e) { if (e.target === this) closeRunModal(); });
        document.getElementById('resetModal').addEventListener('click', function(e) { if (e.target === this) closeResetModal(); });
    </script>
</body>
</html>
